<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Twitter Storm</title>

  <!-- Load Cascade Styling Sheets (CSS) -->
  <link rel='stylesheet' href='https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css'>
  <link rel='stylesheet' href='https://netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css'>
  <link rel="stylesheet" href='./style.css'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css'>

  <!-- Load Javascript (JS) -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js'></script>
  <!-- <script src="./main.js"></script> -->

  <!-- Other meta -->
  <link rel="icon" href="icon.png">

</head>
<body>

  <div style="text-align: center" id="header">
    <img src="storm.png" alt="Legalizzazione Cannabis">
  </div>

  <main id="content" class="tweets">
    <div id="tweet_list" style="text-align: center">
      <!-- Generated buttons will be loaded in this container -->
    </div>
  </main>

  <!----------------------------------- CONFIG CODE ------------------------------------->

  <div id="tweets_config" style="display: none">

    <!-- TEMPLATE used to generate buttons. Single place to change the markup to display. -->
    <template id="tweet_button_template">
      <a class="post_btn">
        <i class="icon-twitter"></i><span></span>
      </a>
    </template>

    <!-- LIST OF TWEETS to create buttons for.
         One tweet per line. Write in natural language (no escaping/encoding).
         Empty spaces are removed automatically.
    -->
    <div id="tweets_data">
      ðŸ“¢ Questa TWEET/STORM Ã¨ per farvi arrivare il messaggio...#Cannabis #LegalizeIt #Manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ La resistenza al #proibizionismo continua: 50 anni di lotte per la legalizzazione della #cannabis,aborto,divorzio,diritti #lgbt+,eutanasia...Rivendichiamo un valore fondamentale del nostro vivere insieme: la libera scelta delle persone. #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ #Legalizzare la #cannabis significa mettere fine agli affari delle mafie, significa riconoscere ai cittadini la libertÃ  di consumare in modo sicuro e responsabile, di curarsi o di intraprendere unâ€™attivitÃ  economica nella piena legalitÃ  #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ La #cannabis puÃ² avere un ruolo nella ricostruzione del paese. Una risorsa per tutta la filiera industriale, per la nostra economia, ma anche per i consumatori che devono avere la possibilitÃ  di fruirne liberamente senza essere perseguitati #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ L'insensato #proibizionismo deve finire! La #cannabis puÃ², una volta liberata, svolgere un ruolo fondamentale per il futuro del nostro paese, sul piano economico, sul piano sociale e sul piano di contrasto alla criminalitÃ  organizzata. #manifestiamoci pic.twitter.com/K3Gp9mGTQT     
      ðŸ“¢ Si chiama civiltÃ , si chiama legalitÃ , si chiama lavoro, si chiama sviluppo economico #ReferendumCannabis #LegalizeIt #manifestiamoci #Cannabis #spininelfianco pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Con il proibizionismo in #Italia un azienda in particolare ha aumentato il suo fatturato e il suo potere: la #mafia! #cannabis #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Legalizzare, controllare, tassare. Unica strada sensata. Un giorno si guarderÃ  a questi tempi con gli stessi sorrisi bonari che destiniamo al periodo del proibizionismo statunitense degli anni â€˜20. ##manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Dicevano "la gente non gliene frega niente di politica". Scoprirono che la gente aveva solo bisogno di altra politica e di nuovi strumenti per partecipare. #dovÃ¨ilmioquesito via @marcocappato pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ I motivi per legalizzare la cannabis sono cosÃ¬ tanti che ha senso essere contrari solo se si Ã¨ mafiosi. #manifestiamoci #manifestiamoci via @cartonimorti pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Legalizzare vuol dire togliere ossigeno alle mafie che gestiscono il traffico e lo spaccio. #manifestiamoci via @robertosaviano pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Togliere soldi alle mafie e salvaguardare la salute di tutti. via @GassmanGassmann #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Ci sono 6 MILIONI di consumatori di cannabis che ogni anno sono costretti a rivolgersi alle mafie. Noi vogliamo dare voce a tutte quelle persone che i politici proibizionisti vorrebbero sbattere in galera! pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Vogliamo la Cannabis legale e lâ€™Italia libera dalle mafie. via @LegaleMeglio #manifestiamoci pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ "Un conservatore si distingue per il senso della misura, la guerra alla droga per l'assurda sproporzione". #SpiniNelFianco pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ Eppure lâ€™avevo proprio qui, da sessantâ€™anni, e oggi non lo trovo: #dovÃ¨ilmioquesito ? #SpiniNelFianco #manifestiamoci via @age_of_VIRGO pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ "La 'Guerra alla Droga' Ã¨ stata un'offensiva. Con interventi militari, tassi di arresti alle stelle e condanne aggressive. https://droghe.aduc.it/articolo/tempo+porre+fine+alla+guerra+alla+droga+atteso_32878.php #SpiniNelFianco #Manifestiamoci https://pic.twitter.com/K3Gp9mGTQT
      ðŸ“¢ L'articolo 73 del testo unico sulle droghe rappresenta il principale strumento di carcerazione in Italia. CiÃ² Ã¨ indegno di un Paese civile. #SpiniNelFianco pic.twitter.com/BI1vV1q6Fi
      ðŸ“¢ Se per Amato il comma 1 del quesito #ReferendumCannabis non riguarda la Cannabis, allora dovete restituirci 32 anni di processi immotivati e quasi il 25% degli attuali detenuti italiani. pic.twitter.com/K3Gp9mGTQT

    </div>
  </div>
    <div style="text-align: center">
        <a href="https://megliolegale.it/"><img src="megliologo.png" alt="Legalizzazione Cannabis"></a>#SpiniNelFianco
    </div>
<div id="twit"></div>
<!-- partial -->
<script type="text/javascript">
// NOTE: keep code AFTER the markup, when programming without using functions. Or use document.ready().


// DEFINE CONFIG

var config = {
  facebook_user: 'https://spininelfianco.github.io/storm08/'
};

// DEFINE FUNCTIONS

function loadTweetBombs() {
  var NEWLINE_SEPARATOR = '\n';

  // get HTML and DATA for tweets, that will be mixed to generate the list of links
  // (jquery works with the same selectors as CSS)
  var tweet_template = $('#tweet_button_template').html();
  var tweets_data = $('#tweets_data').text()
                                   .split(NEWLINE_SEPARATOR);

  // loop through the tweets, add the data to the html template,
  // and add the new element into the list
  for (var i=0; i < tweets_data.length; i++) {
    // get tweet text
    var tweet = tweets_data[i].trim();

    // skip empty lines
    if (tweet.trim().length === 0) {
      continue; // skip this 'for' loop cycle
    }

    var last_btn = buildButtonFor(tweet, tweet_template);
  }

  /* after creating the markup for the buttons, via jQuery,
     initialize the HTML element that have the data attribute 'data-toggle',
     to enable the popover behaviour
  */
  $(function () {
    $('[data-toggle="popover"]').popover()
  });

}

function buildButtonFor(text_to_send, template_html) {
    // copied by the default value of the 'template' parameter (see https://getbootstrap.com/docs/4.1/components/tooltips/)
    var base_tooltip_html = '<div class="popover" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>';

    return $(template_html)
      .attr('title', text_to_send)      // set target title
      // set bootstrap parameters
      .attr('data-toggle', 'popover')           // mark element as popover, so Bootstrap sees it
      .attr('data-html', true)                  // enable interpretation of html code
      // provide the content, as tooltip
      .attr('data-content', buildTooltipHtmlFor(text_to_send))
      .attr('data-template', base_tooltip_html)
      .appendTo('#tweet_list'); // add to tweet-list
      // returns the created button element, in case is needed
}

function buildTooltipHtmlFor(plain_unencoded_text) {
    var link_twitter = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(plain_unencoded_text);
    var link_facebook = "https://www.facebook.com/sharer/sharer.php" +
                            "?u="+ config.facebook_user +
                            "&quote=" + encodeURIComponent(plain_unencoded_text);

    // create new <p>aragraph displaying the bomb text, plus <a>nchors to link to the target social medias
    var $content = $('<p class="bomb-text">').text(plain_unencoded_text);

    var $tw_link = $('<a class="twitter-text">').attr({
        href: link_twitter,
        title: plain_unencoded_text,
        target: '_blank'
    }).text('Twitter');

    var $fb_link = $('<a class="facebook-text">').attr({
        href: link_facebook,
        title: plain_unencoded_text,
        target: '_blank'
    }).text('Facebook');

    // assemble the pieces (in order) and return the resulting content
    return $('<div>')                   // create default tooltip structure
            .append($content)           // append the elements inside tooltip-inner
            .append($tw_link)
            .append($fb_link)
        .html();                        // return the generated HTML
}


// RUN SCRIPT

window.onload = function() {
  //call when everything has loaded
  loadTweetBombs();
};
</script>

</body>
</html>
